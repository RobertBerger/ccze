%define version @VERSION@
%define release 1

Summary: A robust log colorizer
Name: ccze
Version: %{version}
Release: %{release}
Vendor: Generic
Packager: Gergely Nagy <algernon@bonehunter.rulez.org>
URL: http://bonehunter.rulez.org/CCZE.html
Copyright: GPL
Group: Applications/Text
Source: ftp://bonehunter.rulez.org/pub/ccze/stable/ccze-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-root
BuildPrereq: ncurses-devel >= 5.0, pcre-devel >= 3.1

%description
CCZE is a fast log colorizer written in C, intended to be a drop-in replacement
for the well-known colorize.pl.

%prep
%setup -q

%build
./configure \
	--prefix=%{_prefix} \
	--sysconfdir=%{_sysconfdir} \
	--mandir=%{_mandir} \
	--with-builtins=all
make CFLAGS="${RPM_OPT_FLAGS}"

%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=${RPM_BUILD_ROOT}
install -d ${RPM_BUILD_ROOT}%{_sysconfdir}
src/ccze-dump >${RPM_BUILD_ROOT}%{_sysconfdir}/cczerc

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%doc AUTHORS ChangeLog NEWS README THANKS TODO
%config %{_sysconfdir}/cczerc
%{_bindir}/ccze
%{_bindir}/ccze-cssdump
%{_includedir}/ccze.h
%{_mandir}/man1/ccze.1*
%{_mandir}/man1/ccze-cssdump.1*
%{_mandir}/man7/ccze-plugin.7*

%changelog
* Sat Jan 25 2003 Gergely Nagy <algernon@bonehunter.rulez.org>
- Include %{_includedir}/ccze.h
* Mon Jan 13 2003 Gergely Nagy <algernon@bonehunter.rulez.org>
- Include ccze-cssdump and its manual page.
- Packager changed to myself.
* Wed Nov 20 2002 Gergely Nagy <algernon@bonehunter.rulez.org>
- Build all modules statically.
* Tue Nov 19 2002 Gergely Nagy <algernon@bonehunter.rulez.org>
- Use src/ccze-dump to generate the default configuration file.
* Tue Nov 19 2002 Gergely Nagy <algernon@bonehunter.rulez.org>
- Simplified and made it version-neultral.
* Sun Nov 17 2002 Andreas Brenk <ab@aegisnet.biz>
- Initial creation
