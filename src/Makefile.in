## src/Makefile

## -- User-modifiable variables -- ##
srcdir		= @srcdir@
top_srcdir	= @top_srcdir@
subdir		= src

## == The code below shouldn't need to be touched at all == ##

include ../Rules.mk

## -- Private variables -- ##
ALL_LDFLAGS	= ${LDFLAGS} -lpcre -lncurses

SOURCES		= ccze.c
CLEANFILES	= ${SOURCES:.c=.da}

## -- Standard targets -- ##
all: ${PROGRAM}

install: all
	${INSTALL} -d ${DESTDIR}${bindir}
	${INSTALL_PROGRAM} ${PROGRAM} ${DESTDIR}${bindir}/

install-strip:
	${MAKE} INSTALL_PROGRAM='${INSTALL_PROGRAM} -s' install

uninstall:
	rm -f ${DESTDIR}${bindir}/${PROGRAM}

## -- Specific targets -- ##
${PROGRAM}: ${OBJECTS}
	${CC} ${ALL_CFLAGS} -o $@ $^ ${ALL_LDFLAGS}

## -- Dependencies -- ##
ccze.o: ccze.c ${top_builddir}/system.h
${top_builddir}/system.h: ${top_builddir}/config.status
